# LocalCast

## Что делает LocalCast
LocalCast — это простой локальный сервер на Python, который раздаёт видеоконтент по HTTP  
и формирует плейлисты `.m3u` для воспроизведения в VLC на Android TV.

Сервер не управляет воспроизведением — он только отдаёт файлы и плейлисты.
Зацикливание видео и порядок воспроизведения настраиваются в самом VLC.

---

## Как работает система
1) Сервер запускается на компьютере в локальной сети  
2) Сервер читает видео из папки `tv_content`  
3) На основе структуры папок формируется плейлист:
   - `common` — общий контент
   - `tv_X` — персональный контент для конкретного телевизора
4) VLC получает плейлист по HTTP и воспроизводит видео по кругу

---

## Важно знать
- Сервер и телевизор должны находиться в одной локальной сети  
- Видео добавляются и удаляются вручную из папок  
- Обновление контента происходит после перезапуска плейлиста в VLC

## Как узнать IP компьютера
Mac:
Ввести ipconfig getifaddr en0 в консоли  

Windows:
Ввести ipconfig в командной строке
(нужен IPv4 Address)

## Запуск сервера
1) pip install fastapi uvicorn  
2) python server.py  
3) Если всё ок, в консоли будет:
   Uvicorn running on http://0.0.0.0:8000  
4) Проверка сервера:
   http://127.0.0.1:8000/health  
   В браузере должно быть написано: OK

## Подготовка видеоконтента
1) В папке проекта создайте папку `tv_content`, или запустите сервер через python server.py, он автоматически появится
2) Внутри неё:
   - `common/` — видео для всех телевизоров
   - `tv_1/` — видео только для ТВ 1
   - `tv_2/` — видео только для ТВ 2

Пример:
tv_content/
- common/
- tv_1/
- tv_2/

## Подключение VLC на Android TV
1) Компьютер и телевизор должны быть в одной сети
2) В VLC выберите «Открыть сетевой поток»
3) Введите:
   Если надо включить видео с папки common - http://{ip компа}:8000/playlist/common.m3u
   Если надо включить видео для определенного телевизора - http://{ip компа}:8000/playlist/tv/{тут выбираете номер папки которая должна показываться}.m3u